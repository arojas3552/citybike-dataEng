
name: CI/CD City Bikes

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  schedule:
    - cron: '37 21 * * 6'

jobs:
  snyk:
      runs-on: ubuntu-22.04
      
      permissions:
        actions: read
        contents: read
        security-events: write
  
      steps:
  
        - name: Checkout
          uses: actions/checkout@v4
  
        - name: Run Snyk
          uses: snyk/actions/python-3.10@master
          continue-on-error: true
          env:
            SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
          with:
            args: --sarif-file-output=snyk.sarif --skip-unresolved=true
  
        - name: Upload Result to GitHub Code Scanning
          uses: github/codeql-action/upload-sarif@v2
          with:
            sarif_file: snyk.sarif
